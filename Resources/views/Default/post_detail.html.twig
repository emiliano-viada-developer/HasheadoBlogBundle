{% extends 'HasheadoBlogBundle::layout.html.twig' %}

{% block content %}
	<h1>My Blog Homepage</h1>

	<section>
	
		<article>
			<h1>{{ post.title }}</h1>

			<p>{{ post.content }}</p>
		</article>

		<h3>Comments</h3>

		{% if post.comments|length > 0 %}
			{% for comment in post.comments %}

				{% if comment.isAccepted %}

					<article>
						<p>{{ comment.userName }} ({{ comment.userEmail }}) said:</p>
						<p>{{ comment.content }}</p>
					</article>

				{% else %}

					<p><a name="#comment-{{ comment.id }}"/>Your comment is waiting for moderation.</p>

				{% endif %}

			{% endfor %}
		{% else %}
			<p>No comments.</p>
		{% endif %}

		<h3>Leave your comment</h3>

		<form action="{{ path('hasheado_blog_comment_post') }}" method="post">

			<div>
			    {{ form_label(form.userEmail, 'user email') }}
			    {{ form_errors(form.userEmail) }}
			    {{ form_widget(form.userEmail) }}
			</div>

			<div>
			    {{ form_label(form.userName, 'user name') }}
			    {{ form_errors(form.userName) }}
			    {{ form_widget(form.userName) }}
			</div>

			<div>
			    {{ form_label(form.web) }}
			    {{ form_errors(form.web) }}
			    {{ form_widget(form.web) }}
			</div>

			<div>
			    {{ form_label(form.content) }}
			    {{ form_errors(form.content) }}
			    {{ form_widget(form.content) }}
			</div>

			{{ form_widget(form.post) }}

			{{ form_rest(form) }}

			<input type="submit" name="submit_button" value="Comment" />

		</form>
		
	</section>

{% endblock %}